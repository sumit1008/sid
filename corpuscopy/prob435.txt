F. Valuable Cards
In his favorite cafe Kmes once again wanted to try the herring under a fur coat. Previously, it would not have been difficult for him to do this, but the cafe recently introduced a new purchasing policy.
Now, in order to make a purchase, Kmes needs to solve the following problem: 𝑛n cards with prices for different positions are laid out in front of him, on the 𝑖i-th card there is an integer 𝑎𝑖ai, among these prices there is no whole positive integer 𝑥x.
Kmes is asked to divide these cards into the minimum number of bad segments (so that each card belongs to exactly one segment). A segment is considered bad if it is impossible to select a subset of cards with a product equal to 𝑥x. All segments, in which Kmes will divide the cards, must be bad.
Formally, the segment (𝑙,𝑟)(l,r) is bad if there are no indices 𝑖1<𝑖2<…<𝑖𝑘i1<i2<…<ik such that 𝑙≤𝑖1,𝑖𝑘≤𝑟l≤i1,ik≤r, and 𝑎𝑖1⋅𝑎𝑖2…⋅𝑎𝑖𝑘=𝑥ai1⋅ai2…⋅aik=x.
Help Kmes determine the minimum number of bad segments in order to enjoy his favorite dish.
Tags -brute force
Tags -dp
Tags -greedy
Tags -number theory
Tags -two pointers
Tags -*1900
