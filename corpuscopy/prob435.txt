F. Valuable Cards
In his favorite cafe Kmes once again wanted to try the herring under a fur coat. Previously, it would not have been difficult for him to do this, but the cafe recently introduced a new purchasing policy.
Now, in order to make a purchase, Kmes needs to solve the following problem: ğ‘›n cards with prices for different positions are laid out in front of him, on the ğ‘–i-th card there is an integer ğ‘ğ‘–ai, among these prices there is no whole positive integer ğ‘¥x.
Kmes is asked to divide these cards into the minimum number of bad segments (so that each card belongs to exactly one segment). A segment is considered bad if it is impossible to select a subset of cards with a product equal to ğ‘¥x. All segments, in which Kmes will divide the cards, must be bad.
Formally, the segment (ğ‘™,ğ‘Ÿ)(l,r) is bad if there are no indices ğ‘–1<ğ‘–2<â€¦<ğ‘–ğ‘˜i1<i2<â€¦<ik such that ğ‘™â‰¤ğ‘–1,ğ‘–ğ‘˜â‰¤ğ‘Ÿlâ‰¤i1,ikâ‰¤r, and ğ‘ğ‘–1â‹…ğ‘ğ‘–2â€¦â‹…ğ‘ğ‘–ğ‘˜=ğ‘¥ai1â‹…ai2â€¦â‹…aik=x.
Help Kmes determine the minimum number of bad segments in order to enjoy his favorite dish.
Tags -brute force
Tags -dp
Tags -greedy
Tags -number theory
Tags -two pointers
Tags -*1900
