F2. Game in Tree (Hard Version)
This is the hard version of the problem. In this version, it is not guaranteed that ğ‘¢=ğ‘£u=v. You can make hacks only if both versions of the problem are solved.
Alice and Bob are playing a fun game on a tree. This game is played on a tree with ğ‘›n vertices, numbered from 11 to ğ‘›n. Recall that a tree with ğ‘›n vertices is an undirected connected graph with ğ‘›âˆ’1nâˆ’1 edges.
Alice and Bob take turns, with Alice going first. Each player starts at some vertex.
On their turn, a player must move from the current vertex to a neighboring vertex that has not yet been visited by anyone. The first player who cannot make a move loses.
You are given two vertices ğ‘¢u and ğ‘£v. Represent the simple path from vertex ğ‘¢u to ğ‘£v as an array ğ‘1,ğ‘2,ğ‘3,â€¦,ğ‘ğ‘šp1,p2,p3,â€¦,pm, where ğ‘1=ğ‘¢p1=u, ğ‘ğ‘š=ğ‘£pm=v, and there is an edge between ğ‘ğ‘–pi and ğ‘ğ‘–+1pi+1 for all ğ‘–i (1â‰¤ğ‘–<ğ‘š1â‰¤i<m).
You need to determine the winner of the game if Alice starts at vertex 11 and Bob starts at vertex ğ‘ğ‘—pj for each ğ‘—j (where 1â‰¤ğ‘—â‰¤ğ‘š1â‰¤jâ‰¤m).
Tags -binary search
Tags -data structures
Tags -trees
Tags -*3500
